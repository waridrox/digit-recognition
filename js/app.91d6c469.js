(function(){"use strict";var e={2481:function(e,t,n){var o=n(3751),r=n(641),i=n(33);const a={ref:"canvas",style:{border:"2px solid black"}},c={key:0},u={key:1};function s(e,t,n,o,s,f){const l=(0,r.gN)("canvas");return(0,r.uX)(),(0,r.CE)("div",null,[t[1]||(t[1]=(0,r.eW)(" Draw below: ",-1)),t[2]||(t[2]=(0,r.Lk)("br",null,null,-1)),(0,r.bo)((0,r.Lk)("canvas",a,null,512),[[l]]),t[3]||(t[3]=(0,r.Lk)("br",null,null,-1)),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.clear&&e.clear(...t))},"Clear"),e.modelLoaded?((0,r.uX)(),(0,r.CE)("div",u,"Guess is "+(0,i.v_)(e.guess)+", confidence is "+(0,i.v_)(e.confidence),1)):((0,r.uX)(),(0,r.CE)("div",c,"Loading")),t[4]||(t[4]=(0,r.Lk)("br",null,null,-1)),t[5]||(t[5]=(0,r.Lk)("br",null,null,-1)),t[6]||(t[6]=(0,r.Lk)("br",null,null,-1)),t[7]||(t[7]=(0,r.Lk)("a",{href:"https://github.com/waridrox/digit-recognition"},"Source on GitHub",-1))])}n(4114),n(8111),n(7588),n(1701);var f=n(953);const l=e=>{const t=e,n=t.getContext("2d");if(!n)throw new Error("no canvas ctx");t.width=280,t.height=280,n.lineCap="round",n.lineWidth=10,n.shadowBlur=5,n.shadowColor="rgb(0, 0, 0)";let o={offsetX:0,offsetY:0},r=[],i=!1;const a="black",c=(e,t,r)=>{if(n){const{offsetX:i,offsetY:a}=t,{offsetX:c,offsetY:u}=e;n.beginPath(),n.strokeStyle=r,n.moveTo(c,u),n.lineTo(i,a),n.stroke(),o={offsetX:i,offsetY:a}}},u=e=>{const{offsetX:t,offsetY:n}=e;i=!0,o={offsetX:t,offsetY:n}},s=e=>{i&&(i=!1),e.target?.dispatchEvent(new Event("endPaint"))},f=e=>{if(i){const{offsetX:t,offsetY:n}=e,i={offsetX:t,offsetY:n},u={start:{...o},stop:{...i}};r=r.concat(u),c(o,i,a)}};t.addEventListener("mousedown",u),t.addEventListener("mousemove",f),t.addEventListener("mouseup",s),t.addEventListener("mouseleave",s),t.addEventListener("touchstart",e=>{e.preventDefault();const n=e.touches[0],o=t.getBoundingClientRect(),r=n.clientX+2*o.left,i=n.clientY+2*o.top,a=new MouseEvent("mousedown",{clientX:r,clientY:i});t.dispatchEvent(a)}),t.addEventListener("touchmove",e=>{const n=e.touches[0],o=t.getBoundingClientRect(),r=n.clientX+2*o.left,i=n.clientY+2*o.top,a=new MouseEvent("mousemove",{clientX:r,clientY:i});t.dispatchEvent(a)},!1),t.addEventListener("touchend",s),t.addEventListener("touchcancel",s)};var d={mounted:l};n(6573),n(8100),n(7936),n(9577);const v=e=>{const t=e.height,n=e.width,o=e.getContext("2d");if(!o)throw new Error("Could not get canvas ctx");const r=o.getImageData(0,0,n,t),i=r.data,a=new Uint32Array(i.buffer);let c,u,s=n,f=t,l=0,d=0;for(u=0;u<t;u++)for(c=0;c<n;c++)a[c+u*n]>0&&c<s&&(s=c);for(u=0;u<t;u++)for(c=n;c>=0;c--)a[c+u*n]>0&&c>l&&(l=c);for(c=0;c<n;c++)for(u=0;u<t;u++)a[c+u*n]>0&&u<f&&(f=u);for(c=0;c<n;c++)for(u=t;u>=0;u--)a[c+u*n]>0&&u>d&&(d=u);return{left:s-50,top:f-50,width:l-s+100,height:d-f+100}};var h=v,p=(0,r.pM)({name:"App",directives:{canvas:d},setup(){const e=(0,f.KR)(),t=document.createElement("canvas"),o=t.getContext("2d"),i=()=>{if(!e.value)throw new Error("No canvas");const{top:n,left:r,width:i,height:a}=h(e.value);o?.clearRect(0,0,t.width,t.height),o?.drawImage(e.value,r,n,i,a,0,0,28,28);const c=[];return o?.getImageData(0,0,28,28).data.forEach((e,t)=>{t%4===3&&c.push(e/255)}),c},a=(0,f.KR)(!1);let c;const u=async()=>{const{Network:e}=await n.e(927).then(n.bind(n,3927)),t=await(await fetch("./model.json")).text();c=e.from_model(t),a.value=!0},s=(0,f.KR)(),l=(0,f.KR)(),d=()=>{const e=i(),t=c.predict([e])[0];let n=0;t.forEach((e,o)=>{e>=t[n]&&(n=o,l.value=e.toFixed(3))}),console.log(t.map(e=>e.toFixed(3))),s.value=n};(0,r.sV)(()=>{u(),e.value?.addEventListener("endPaint",()=>{a.value&&d()})});const v=()=>{e.value?.getContext("2d")?.clearRect(0,0,e.value.width,e.value.height),s.value=void 0,l.value=void 0};return{clear:v,canvas:e,modelLoaded:a,guess:s,confidence:l}}}),m=n(6262);const b=(0,m.A)(p,[["render",s]]);var g=b;(0,o.Ef)(g).mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e="function"===typeof Symbol,t=e?Symbol("webpack queues"):"__webpack_queues__",o=e?Symbol("webpack exports"):"__webpack_exports__",r=e?Symbol("webpack error"):"__webpack_error__",i=function(e){e&&e.d<1&&(e.d=1,e.forEach(function(e){e.r--}),e.forEach(function(e){e.r--?e.r++:e()}))},a=function(e){return e.map(function(e){if(null!==e&&"object"===typeof e){if(e[t])return e;if(e.then){var n=[];n.d=0,e.then(function(e){a[o]=e,i(n)},function(e){a[r]=e,i(n)});var a={};return a[t]=function(e){e(n)},a}}var c={};return c[t]=function(){},c[o]=e,c})};n.a=function(e,n,c){var u;c&&((u=[]).d=-1);var s,f,l,d=new Set,v=e.exports,h=new Promise(function(e,t){l=t,f=e});h[o]=v,h[t]=function(e){u&&e(u),d.forEach(e),h["catch"](function(){})},e.exports=h;var p=function(e){var n;s=a(e);var i=function(){return s.map(function(e){if(e[r])throw e[r];return e[o]})},c=new Promise(function(e){n=function(){e(i)},n.r=0;var o=function(e){e!==u&&!d.has(e)&&(d.add(e),e&&!e.d&&(n.r++,e.push(n)))};s.map(function(e){e[t](o)})});return n.r?c:i()},m=function(e){e?l(h[r]=e):f(v),i(u)};n(p,m),u&&u.d<0&&(u.d=0)}}(),function(){var e=[];n.O=function(t,o,r,i){if(!o){var a=1/0;for(f=0;f<e.length;f++){o=e[f][0],r=e[f][1],i=e[f][2];for(var c=!0,u=0;u<o.length;u++)(!1&i||a>=i)&&Object.keys(n.O).every(function(e){return n.O[e](o[u])})?o.splice(u--,1):(c=!1,i<a&&(a=i));if(c){e.splice(f--,1);var s=r();void 0!==s&&(t=s)}}return t}i=i||0;for(var f=e.length;f>0&&e[f-1][2]>i;f--)e[f]=e[f-1];e[f]=[o,r,i]}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce(function(t,o){return n.f[o](e,t),t},[]))}}(),function(){n.u=function(e){return"js/"+e+".e66f8df5.js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="digit-recognition:";n.l=function(o,r,i,a){if(e[o])e[o].push(r);else{var c,u;if(void 0!==i)for(var s=document.getElementsByTagName("script"),f=0;f<s.length;f++){var l=s[f];if(l.getAttribute("src")==o||l.getAttribute("data-webpack")==t+i){c=l;break}}c||(u=!0,c=document.createElement("script"),c.charset="utf-8",n.nc&&c.setAttribute("nonce",n.nc),c.setAttribute("data-webpack",t+i),c.src=o),e[o]=[r];var d=function(t,n){c.onerror=c.onload=null,clearTimeout(v);var r=e[o];if(delete e[o],c.parentNode&&c.parentNode.removeChild(c),r&&r.forEach(function(e){return e(n)}),t)return t(n)},v=setTimeout(d.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=d.bind(null,c.onerror),c.onload=d.bind(null,c.onload),u&&document.head.appendChild(c)}}}(),function(){n.v=function(e,t,o,r){var i=fetch(n.p+""+o+".module.wasm"),a=function(){return i.then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,r)}).then(function(t){return Object.assign(e,t.instance.exports)})};return i.then(function(t){return"function"===typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(t,r).then(function(t){return Object.assign(e,t.instance.exports)},function(e){if("application/wasm"!==t.headers.get("Content-Type"))return console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e),a();throw e}):a()})}}(),function(){n.p="/digit-recognition/"}(),function(){var e={524:0};n.f.j=function(t,o){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var i=new Promise(function(n,o){r=e[t]=[n,o]});o.push(r[2]=i);var a=n.p+n.u(t),c=new Error,u=function(o){if(n.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var i=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",c.name="ChunkLoadError",c.type=i,c.request=a,r[1](c)}};n.l(a,u,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,a=o[0],c=o[1],u=o[2],s=0;if(a.some(function(t){return 0!==e[t]})){for(r in c)n.o(c,r)&&(n.m[r]=c[r]);if(u)var f=u(n)}for(t&&t(o);s<a.length;s++)i=a[s],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(f)},o=self["webpackChunkdigit_recognition"]=self["webpackChunkdigit_recognition"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],function(){return n(2481)});o=n.O(o)})();
//# sourceMappingURL=app.91d6c469.js.map